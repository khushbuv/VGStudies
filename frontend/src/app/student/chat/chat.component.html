<div class="container-fluid chatBox">
    <div class="row justify-content-end">      

        <ng-container *ngFor="let user of openChatBoxUser; index as i;">

            <div class="col-md-3 col-xl-3 chat" *ngIf="user.closeChatBox">
                
                   <div class="card minCard minHead" *ngIf="user.hideChatBox">
                       <div class="card-header msg_head">
                           <div class="d-flex bd-highlight">
                           <div class="user_info">
                               <span>{{user.name}}</span>
                             </div>
         
                             <div class="chat_close_option"><span><i class="fa fa-plus" (click)="toggleUserChatBox(user)"></i></span>
                               <span><i class="fa fa-window-close" (click)="closeUserChat(i)"></i></span></div>
                               </div>
         
                       </div>
                   </div>
     
                   <div class="card" *ngIf="!user.hideChatBox">
                      <div class="card-header msg_head">
                          <div class="d-flex bd-highlight">
                            <div class="img_cont">
                              <img [src]="user.photo" class="rounded-circle user_img">
                              <span class="online_icon"></span>
                            </div>
                            <div class="user_info">
                              <span>{{user.name}}</span>
                              <p> Messages</p>
                            </div>
                            <div class="video_cam">
                              <span><i class="fa fa-video-camera"></i></span>
                              <span><i class="fa fa-phone"></i></span>
                            </div>
          
                            <div class="chat_close_option"><span><i class="fa fa-minus" (click)="toggleUserChatBox(user)"></i></span>
                              <span><i class="fa fa-window-close"  (click)="closeUserChat(i)"></i></span></div>
          
                          </div>
                         
                          
                        </div>


                        <div class="card-body msg_card_body">
                            <ng-container *ngFor="let msg of user.message;">

                                <div class="d-flex justify-content-start mb-4" *ngIf="msg.type == 1">
                                    <div class="img_cont_msg">
                                      <img [src]="this.authService.loggedInUserPhoto" class="rounded-circle user_img_msg">
                                    </div>
                                    <div class="msg_cotainer">
                                     {{msg.msgLine}}
                                      <span class="msg_time">Today</span>
                                    </div>
                                  </div>
                        
                        
                        
                                  <div class="d-flex justify-content-end mb-4" *ngIf="msg.type == 2">
                                    <div class="msg_cotainer_send">
                                        {{msg.msgLine}}
                                      <span class="msg_time_send">Today</span>
                                    </div>
                                    <div class="img_cont_msg">
                                  <img [src]="user.photo" class="rounded-circle user_img_msg">
                                    </div>
                                  </div>

                                  
                            </ng-container>
                        </div>

                        <div class="card-footer">
                            <div class="input-group" >
                              <div class="input-group-append">
                                <span class="input-group-text attach_btn"><i class="fa fa-paperclip"></i></span>
                              </div>
                              <textarea name="" class="form-control type_msg" placeholder="Type your message..." #chatMsg ></textarea>
                              <div class="input-group-append" (click)="sendMessage(chatMsg,user)">
                                <span class="input-group-text send_btn"><i class="fa fa-location-arrow"></i></span>
                              </div>
                            </div>
                          </div>
                    </div>
      </div>

        </ng-container>

             
       


              


        <div class="col-md-3 col-xl-3 chat">

            <div class="card mb-sm-3 mb-md-0 contacts_card minChatRoomHead" *ngIf="hideChatRoom">
                <div class="card-header">

                      <div class="chat_close_option"><span><i class="fa fa-plus" (click)="toggleChatRoom()"></i></span>
                       </div>


                  </div>
            </div>

            <div class="card mb-sm-3 mb-md-0 contacts_card" *ngIf="!hideChatRoom">
                <div class="card-header">
                    <div class="input-group">
                      <input type="text" placeholder="Search..." name="" class="form-control search">
                      <div class="input-group-prepend">
                        <span class="input-group-text search_btn"><i class="fa fa-search"></i></span>
                      </div>

                      <div class="chat_close_option"><span><i class="fa fa-minus" (click)="toggleChatRoom()"></i></span>
                       </div>
                    </div>


                  </div>

                  <div class="card-body contacts_body">
                      <ul class="contacts">
                       <!-- <li class="active"></li> -->
                       <ng-container *ngFor="let user of onlineUser; index as i;">
                          <li [class.active]="user.active" (click)="openChatBox(user)">
                              <div class="d-flex bd-highlight">
                                <div class="img_cont">
                                  <img [src]="user.photo" class="rounded-circle user_img">
                                  <span class="online_icon"></span>
                                  <!--<span class="online_icon offline"></span> -->
                                </div>
                                <div class="user_info">
                                  <span>{{user.name}}</span>
                                  <p>{{user.name}} is online</p>
                                  <!--<p>Sahar left 7 mins ago</p>-->
                                </div>
                              </div>
                            </li>

                          </ng-container>
                      </ul> 

                  </div>
                  <div class="card-footer"></div>
            </div>        
        </div>

      
          
    </div>
</div>